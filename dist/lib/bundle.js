!function(t){var s={};function i(e){if(s[e])return s[e].exports;var h=s[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)i.d(e,h,function(s){return t[s]}.bind(null,h));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);class e{constructor(){this.restart=!1,this.input={LEFT:!1,RIGHT:!1,DOWN:!1,UP:!1,UP_MOVE:!1,ATTACK:!1,REVIVE:!1,KICK:!1,SHOOT:!1,SPECIAL:!1,PAUSE:!1},this.attack=!1,this.disable=!1,this.counter=0,this.frame=0,this.maxFrame=0,this.keyHandler=this.keyHandler.bind(this),document.addEventListener("keydown",this.keyHandler),document.addEventListener("keyup",this.keyHandler)}keyHandler(t,s=[65,68,84,89,85,87]){let i="keydown"===t.type;switch(t.keyCode){case s[0]:this.input.LEFT=i;break;case s[1]:this.input.RIGHT=i;break;case s[2]:this.input.ATTACK=i;break;case s[3]:this.input.KICK=i;break;case s[4]:this.input.SPECIAL=i;break;case s[5]:this.input.UP=i}this.input.ATTACK&&this.input.SPECIAL?this.keyControl(3,"SPECIAL"):this.input.KICK&&this.input.SPECIAL?this.keyControl(10,"SPECIAL"):this.input.KICK?this.keyControl(4,"KICK"):this.input.ATTACK&&this.keyControl(1,"ATTACK"),"keyup"===t.type&&(this.counter=0)}keyControl(t,s){this.counter++,this.counter>t?this.input[s]=!1:this.input[s]=!0}gameControl(){this.input.REVIVE=!1}}var h=class{constructor(){this.sound=document.createElement("audio"),this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none"}play(t){this.sound.src=t,this.sound.play().then(()=>console.log())}stop(){this.sound.pause()}};var a=class{constructor(t,s,i,e){this.ctx=t,this.w=40,this.h=40,this.x=s+50*e,this.y=i+35,this.speed=10*e,this.image=new Image,this.image.src=e>0?"./asset/bullet.png":"./asset/bullet_left.png",this.hit=!1,this.collide=!1,this.sound=new h,this.m=!0}shoot(){this.ctx.drawImage(this.image,this.x,this.y,this.w,this.h),this.x+=this.speed}playSound(){this.sound.play("./asset/sound/hadouken.mp3")}draw(){this.collide||this.shoot()}},r={ken:{jump:[{name:"s1",x:0,y:15,width:42,height:75},{name:"s2",x:50,y:0,width:33,height:90},{name:"s3",x:92,y:8,width:29,height:78},{name:"s4",x:129,y:10,width:31,height:68},{name:"s5",x:166,y:8,width:29,height:78},{name:"s6",x:203,y:0,width:33,height:90},{name:"s7",x:243,y:15,width:43,height:75}],forward_jump:[{name:"sprite4",x:3,y:23,width:43,height:75},{name:"sprite1",x:51,y:8,width:33,height:90},{name:"sprite7",x:91,y:39,width:60,height:37},{name:"sprite3",x:158,y:22,width:31,height:68},{name:"sprite6",x:197,y:35,width:73,height:39},{name:"sprite5",x:277,y:24,width:43,height:74},{name:"sprite2",x:327,y:8,width:33,height:90}],special_kick:[{name:"sprite11",x:0,y:38,width:39,height:91},{name:"sprite3",x:53,y:9,width:32,height:82},{name:"sprite4",x:102,y:9,width:55,height:87},{name:"sprite5",x:167,y:10,width:35,height:84},{name:"sprite6",x:210,y:11,width:56,height:80},{name:"sprite7",x:288,y:12,width:33,height:80},{name:"sprite10",x:340,y:16,width:34,height:83},{name:"sprite12",x:385,y:51,width:29,height:78},{name:"sprite13",x:421,y:54,width:43,height:75}],fly_kick:[{name:"sprite1",x:0,y:16,width:36,height:63},{name:"sprite3",x:41,y:22,width:63,height:51},{name:"sprite2",x:108,y:16,width:37,height:63}],stun:[{name:"sprite3",x:1,y:9,width:52,height:77},{name:"sprite4",x:54,y:10,width:56,height:76},{name:"sprite1",x:110,y:4,width:62,height:82},{name:"sprite2",x:173,y:6,width:48,height:80}]},ryu:{kick:[{name:"sprite2",x:5,y:4,width:39,height:81},{name:"sprite1",x:61,y:1,width:67,height:84},{name:"sprite3",x:134,y:4,width:39,height:81}]}};class n{constructor(t){this.char=t,this.image=new Image,this.maxFrame=3,this.frame=0,this.image.onload=()=>{this.w=this.image.width/(this.maxFrame+1),this.h=this.image.height,this.x=this.frame*this.w,this.y=0}}posUpdate(t){this.w=t[this.frame].width,this.h=t[this.frame].height,this.x=t[this.frame].x,this.y=t[this.frame].y}posUpdateRegular(){this.w=this.image.width/(this.maxFrame+1),this.h=this.image.height,this.x=this.frame*this.w,this.y=0}update(t){if(this.posUpdateRegular(),"ken"===this.char)switch(t){case"jump":this.posUpdate(r.ken.jump),this.maxFrame=6,this.image.src=`./asset/${this.char}/${t}.png`;break;case"forward_jump":this.posUpdate(r.ken.forward_jump),this.maxFrame=6,this.image.src=`./asset/${this.char}/${t}.png`;break;case"special_kick":this.posUpdate(r.ken.special_kick),this.maxFrame=8,this.image.src=`./asset/${this.char}/${t}.png`;break;case"kick":case"moving":this.maxFrame=4,this.image.src=`./asset/${this.char}/${t}.png`;break;case"stun":case"dead":this.maxFrame=3,this.image.src=`./asset/${this.char}/${t}.png`;break;case"punch":case"win":this.maxFrame=2,this.image.src=`./asset/${this.char}/${t}.png`;break;case"shot":this.maxFrame=1,this.image.src=`./asset/${this.char}/${t}.png`;break;case"fly_kick":case"block":case"fly_punch":this.maxFrame=0,this.image.src=`./asset/${this.char}/${t}.png`;break;default:this.maxFrame=3,this.image.src=`./asset/${this.char}/idle.png`}if("ryu"===this.char)switch(t){case"special_kick":this.maxFrame=5,this.image.src=`./asset/${this.char}/${t}.png`;break;case"moving":this.maxFrame=4,this.image.src=`./asset/${this.char}/${t}.png`;break;case"kick":this.posUpdate(r.ryu.kick),this.maxFrame=2,this.image.src=`./asset/${this.char}/${t}.png`;break;case"punch":case"shot":case"stun":case"win":this.maxFrame=2,this.image.src=`./asset/${this.char}/${t}.png`;break;case"block":this.maxFrame=0,this.image.src=`./asset/${this.char}/${t}.png`;break;case"dead":this.maxFrame=3,this.image.src=`./asset/${this.char}/${t}.png`;break;default:this.maxFrame=3,this.image.src=`./asset/${this.char}/idle.png`}}}var o=class{constructor(t,s=300,i,a){this.ctx=t,this.keyboard=new e,this.frame=0,this.x=s,this.y=300,this.speed=0,this.stop=0,this.move=5,this.bullet=null,this.fps=0,this.stun=!1,this.block=!1,this.sprite=new n(i),this.dir=a,this.state="idle",this.desc="",this.sControl=!0,this.sound=new h,this.delay=0,this.dead=!1,this.imagePosX=this.sprite.x,this.imagePosY=this.sprite.y,this.w=this.sprite.w,this.h=this.sprite.h,this.onGround=!1,this.jumpPower=-8,this.dy=0,this.world={gravity:.2,drag:.999,groundDrag:.9,ground:400}}draw(){this.bullet&&this.bullet.draw(),this.ctx.save(),this.ctx.scale(this.dir,1),this.ctx.drawImage(this.sprite.image,this.imagePosX,this.imagePosY,this.w,this.h,this.dir*this.x,this.y,this.dir*this.w*2,2*this.h),this.ctx.restore()}updateDir(t){this.x<t?(this.dir=1,this.keyboard.input.LEFT&&this.dullMove(t)&&(this.speed=-this.move)):(this.dir=-1,this.keyboard.input.RIGHT&&this.dullMove(t)&&(this.speed=this.move))}hitDir(){return 1*-this.dir}spriteUpdate(){this.keyboard.input.UP&&(this.keyboard.input.RIGHT||this.keyboard.input.LEFT)&&"jump"!==this.state?(!0===this.keyboard.input.LEFT?this.speed=-this.move:this.speed=this.move,this.state="forward_jump",this.keyboard.input.ATTACK&&(this.state="fly_punch"),this.keyboard.input.KICK&&(this.state="fly_kick")):this.keyboard.input.UP&&"forward_jump"!==this.state?(this.state="jump",this.keyboard.input.ATTACK?this.state="fly_punch":this.keyboard.input.KICK&&(this.state="fly_kick")):this.stun?(this.state="stun",this.delay++,this.delay>20&&(this.stun=!1,this.delay=0)):this.block?(this.state="block",this.delay++,this.delay>10&&(this.block=!1,this.delay=0)):this.keyboard.input.SPECIAL?this.specialAttack():(this.keyboard.input.LEFT||this.keyboard.input.RIGHT)&&"jump"!==this.state&&"forward_jump"!==this.state?(!0===this.keyboard.input.LEFT?this.speed=-this.move:this.speed=this.move,this.state="moving"):this.keyboard.input.ATTACK&&!this.stun&&"special_kick"!==this.state?this.state="punch":this.keyboard.input.KICK&&!this.stun&&"special_kick"!==this.state?this.state="kick":this.onGround&&(this.state="",this.keyboard.input.PAUSE=!1)}specialAttack(){this.keyboard.input.ATTACK&&!this.keyboard.input.KICK?(this.state="shot",this.bullet||(0===this.frame&&this.playSound("./asset/sound/hadouken.mp3"),this.bullet=new a(this.ctx,this.x,this.y,this.dir)),this.keyboard.input.SHOOT&&(this.bullet.playSound(),this.keyboard.input.SHOOT=!1)):!this.keyboard.input.ATTACK&&this.keyboard.input.KICK&&(this.state="special_kick")}stateUpdate(t){this.fps++,this.desc!==this.state&&(this.frame=0,this.desc=this.state),this.fps>t&&(this.fps=0,this.frame++,this.frame>this.sprite.maxFrame&&(this.frame=0)),"special_kick"===this.state&&(this.x+=2*this.dir)}hitBottom(){this.y+120>=this.world.ground?(this.y=this.world.ground-120,this.dy=0,this.onGround=!0,this.keyboard.input.UP=!1):(this.keyboard.input.UP=!0,this.onGround=!1)}action(t){this.sprite.frame=this.frame,this.speed=this.stop,this.spriteUpdate(),this.stateUpdate(10),this.sprite.update(this.state)}dullMove(t){return Math.abs(this.x-t)<90}borderLimit(){this.x>875&&(this.keyboard.input.LEFT?this.speed=-this.move:this.speed=0),this.x<0&&(this.keyboard.input.RIGHT?this.speed=this.move:this.speed=0)}playSound(t){this.sControl&&(this.sound.play(t),this.sControl=!1)}meleeSound(t){this.keyboard.input.ATTACK||this.keyboard.input.KICK?Math.abs(this.x-t.x)<100?this.playSound("./asset/sound/punch_hit.wav"):this.keyboard.input.KICK&&this.keyboard.input.SPECIAL?this.playSound("./asset/sound/s_kick.mp3"):this.playSound("./asset/sound/punch_miss.wav"):this.sControl=!0}soundControl(t){"jump"!==this.state&&"forward_jump"!==this.state&&this.meleeSound(t)}update(t=0){this.updateDir(t),this.action(t),this.borderLimit(),this.x+=this.speed,this.keyboard.input.UP&&this.onGround&&(this.dy=this.jumpPower),this.dy+=this.world.gravity,this.dy*=this.world.drag,this.y+=this.dy,this.imagePosX=this.sprite.x,this.imagePosY=this.sprite.y,this.w=this.sprite.w,this.h=this.sprite.h,this.hitBottom()}removePlayer(){this.sprite.update("dead"),this.dead=!0}over(t){this.imagePosX=this.sprite.x,this.imagePosY=this.sprite.y,this.w=this.sprite.w,this.h=this.sprite.h,this.sprite.frame=this.frame,this.sprite.update(t),this.fps++,this.y="dead"===t?350:230,this.fps>10&&(this.fps=0,this.frame>=this.sprite.maxFrame?this.frame=this.sprite.maxFrame:this.frame++)}};class p{constructor(t,s,i,e){this.ctx=t,this.x=s,this.y=i,this.len=e,this.fixlen=e,this.center=(this.x+this.fixlen)/2,this.arr=[this.center,this.center+40]}draw(t="yellow"){this.ctx.fillStyle="red",this.ctx.fillRect(this.center,this.y,this.fixlen,30),this.ctx.fillStyle=t,this.ctx.fillRect(this.center,this.y,this.len,30),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.strokeRect(this.center,this.y,this.fixlen,30)}winCount(t){this.arr.forEach((s,i)=>{this.ctx.beginPath(),this.ctx.arc(s,this.y+60,10,0,2*Math.PI),i<t?(this.ctx.fillStyle="green",this.ctx.fill()):this.ctx.fillStyle="none",this.ctx.stroke()})}block(t=.05){this.len-=t}hit(t=1){this.len-=t}}var l=class{constructor(t){this.ctx=t,this.p1=new o(this.ctx,300,"ken",1),this.p2=new o(this.ctx,700,"ryu",-1),this.p1hp=new p(this.ctx,0,50,250),this.p2hp=new p(this.ctx,1e3,50,250),this.over=!1,this.time=99}stunned(){this.p1.keyboard.attack&&(this.p2.stun=!0,this.p2.x++),this.p2.keyboard.attack&&(this.p1.stun=!0,this.p1.x--)}bulControl(t,s){t&&(Math.abs(t.x-s.x)<100?this.p2.keyboard.input.RIGHT?this.p2.block=!0:this.p1.keyboard.input.LEFT?this.p1.block=!0:s.stun=!0:s.stun=!1)}fightControl(){this.p2.block=!1,this.p1.block=!1,Math.abs(this.p1.x-this.p2.x)<100&&(this.p1.keyboard.attack||this.p2.keyboard.attack)&&(this.p1.keyboard.attack&&this.p2.keyboard.input.RIGHT&&(this.p2.block=!0,this.p2.x++),this.p2.keyboard.attack&&this.p1.keyboard.input.LEFT&&(this.p1.block=!0,this.p1.x--),this.stunned()),this.bulControl(this.p1.bullet,this.p2),this.bulControl(this.p2.bullet,this.p1)}hpControl(){this.p1.stun&&this.p1hp.hit(),this.p1.block&&this.p1hp.block(),this.p2.stun&&this.p2hp.hit(),this.p2.block&&this.p2hp.block()}playersCollision(){this.fightControl(),this.p1.soundControl(this.p2),this.p2.soundControl(this.p1),this.hpControl()}draw(){this.p1.draw(),this.p2.draw(),this.p1hp.draw(),this.p2hp.draw()}update(){this.p1.update(this.p2.x),this.p2.update(this.p1.x),this.playersCollision()}gameover(){this.ctx.font="40px Acme",this.ctx.fillStyle="red",this.ctx.textAlign="center",this.ctx.fillText("You Win",500,150)}gamefun(){this.p1hp.len>=0&&this.p2hp.len>=0&&this.time>0?this.update():this.gameover(),this.draw(),this.gameConstraint()}gameConstraint(){this.p1hp.len<=0?(this.p2.win(),this.p1.removePlayer(),this.over=!0):this.p2hp.len<=0&&(this.p1.win(),this.p2.removePlayer(),this.over=!0)}};class d{constructor(t){this.ctx=t,this.maxWidth=1e3,this.maxHeight=500,this.image=new Image,this.image.src="https://i.pinimg.com/originals/91/64/01/9164016aa77fa969f71800b9ba8c32b4.gif"}draw(){this.ctx.drawImage(this.image,0,0,this.maxWidth,this.maxHeight)}}class c extends o{constructor(t,s){super(),this.x=t,this.ctx=s,this.rw=140,this.rh=160,this.y=280,this.alive=!0,this.frame=0,this.transparent=1,this.fps=0,this.dir=1,this.attack=!1,this.counter=0,this.sprite=new n("ryu"),this.aType=["punch","kick"],this.currentAttack="kick",this.dull=!1,this.blocked=!1,this.stop=0,this.chance=0,this.imagePosX=this.sprite.x,this.imagePosY=this.sprite.y,this.w=this.sprite.w,this.h=this.sprite.h,this.move=2,this.bullet=null,this.sControl=!0,this.random=Math.random(),this.onGround=!1,this.jumpPower=-8,this.dy=0,this.world={gravity:.2,drag:.999,groundDrag:.9,ground:400}}fpsControl(t){this.fps++,this.fps>t&&(this.fps=0,this.alive?(this.frame++,this.frame>this.sprite.maxFrame&&(this.frame=0)):this.frame>=this.sprite.maxFrame?this.frame=this.sprite.maxFrame:this.frame++)}setup(t){this.sprite.frame=this.frame,this.imagePosX=this.sprite.x,this.imagePosY=this.sprite.y,this.w=this.sprite.w,this.h=this.sprite.h,this.fpsControl(15),this.ctx.save(),this.ctx.scale(this.dir,1),this.ctx.globalAlpha=this.transparent,this.ctx.drawImage(this.sprite.image,this.imagePosX,this.imagePosY,this.w,this.h,this.dir*this.x,this.y,this.dir*this.w*2,2*this.h),this.ctx.restore()}toggleStatus(t,s){if(this.counter>t){switch(s){case"attack":this.attack=!this.attack;break;case"move":this.dull=!1;break;case"block":this.blocked=!1}this.counter=0}}updateAttackSprite(){const t=Math.floor(3*Math.random());this.currentAttack=this.aType[t]}attacksound(){this.playSound("./asset/sound/punch_hit.mp3")}updateX(t,s,i=1){this.x<t?this.x+=s*i:this.x-=s*i}update(t){this.sControl=!0,this.dull||this.blocked?(this.blocked?(this.toggleStatus(20,"block"),this.sprite.update("block")):this.dull&&(this.sprite.update("stun"),this.toggleStatus(20,"move")),this.counter++):Math.abs(this.x-t)>240?this.random<.35?(this.sprite.update("shot"),null===this.bullet&&0===this.frame&&(this.playSound("./asset/sound/hadouken.mp3"),this.bullet=new a(this.ctx,this.x,this.y,this.dir),console.log("new bullet ?"))):(this.updateX(t,this.move),this.sprite.update("moving")):Math.abs(this.x-t)>90?this.random<.4?(this.updateX(t,this.move),this.sprite.update("moving")):(this.updateX(t,this.stop),this.sprite.update()):this.random<.3?(this.attack=!0,this.sprite.update("punch")):(this.attack=!1,this.sprite.update())}playSound(t){this.sControl&&(this.sound.play(t),this.sControl=!1)}updateDir(t){t>this.x?this.dir=1:this.dir=-1}die(){this.y=350,this.sprite.update("dead")}win(){this.y=230,this.sprite.update("win")}bulletRange(){this.bullet.x<0||this.bullet.x>1e3?this.bullet=null:this.bullet.draw()}draw(t){this.updateDir(t),this.setup(t),this.bullet&&this.bulletRange()}}var u=class{constructor(t){this.ctx=t,this.test=100,this.kill=0,this.player=new o(this.ctx,300,"ken",1),this.enemy=new c(800,this.ctx),this.image=new Image,this.sound=new h,this.p1Hp=new p(this.ctx,0,50,250),this.enemyHp=new p(this.ctx,1e3,50,250),this.playSound=!0,this.enemyStr=1,this.respTime=30,this.prop=Math.random(),this.hitChance=.6,this.sound=new h,this.splay=!0,this.start=!1,this.round=1,this.fps=0,this.count=0,this.pWin=0,this.eWin=0,this.hasWinner=!1,this.over=!1,this.whoWon=""}gameover(){this.image.src="https://static.comicvine.com/uploads/original/11111/111112704/3860536-ron_vs_ken_by_eastmonkey.jpg",this.ctx.drawImage(this.image,0,0,1e3,500),this.ctx.font="40px StreetFighter",this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText("Game Over",500,150),this.totalScore()}totalScore(){this.test--,0===this.test&&this.sound.play("./asset/sound/game_finished.wav"),this.test<=20&&this.ctx.fillText(`Thank you for playing ${this.whoWon}`,500,290)}enemydead(t,s=90){Math.abs(t-this.enemy.x)<s?(this.prop>this.hitChance?(this.enemy.dull=!0,this.hitChance+=.01,this.enemyHp.hit()):(this.enemy.blocked=!0,this.hitChance-=.001,this.enemyHp.block()),this.player.bullet&&(this.player.bullet.collide=!0,this.player.bullet=null),this.player.keyboard.input.KICK&&this.player.keyboard.input.SPECIAL&&this.enemy.updateX(this.player.x,1,-2)):(this.hitChance=.6,this.prop=Math.random())}playerToEnemy(){this.player.keyboard.input.ATTACK||this.player.keyboard.input.KICK?this.enemydead(this.player.x,90):this.player.bullet&&this.enemydead(this.player.bullet.x,80)}bulltobull(){Math.abs(this.player.bullet.x-this.enemy.bullet.x)<20&&(this.player.bullet.collide=!0,this.enemy.bullet.collide=!0,this.player.bullet=null,this.enemy.bullet=null)}enemyToPlayer(t){t&&Math.abs(t.x-this.player.x)<80&&Math.abs(this.enemy.y-this.player.y)<10?(void 0!==t.collide&&(t.collide=!0,this.fps>20&&(this.enemy.bullet=null,this.fps=0),this.fps++),(this.enemy.dull||this.enemy.blocked)&&(this.enemy.attack=!1),(this.enemy.attack||this.enemy.bullet)&&(this.player.keyboard.input.LEFT?this.player.x<t.x&&(this.player.block=!0,this.p1Hp.block()):this.player.keyboard.input.RIGHT?this.player.x>t.x&&(this.player.block=!0,this.p1Hp.block()):(this.p1Hp.hit(this.enemyStr),this.player.stun=!0))):this.enemy.attack=!1}moveControl(){Math.abs(this.player.x-this.enemy.x)<=80&&Math.abs(this.player.y-this.enemy.y)<=10&&(this.player.x>this.enemy.x?this.player.keyboard.input.LEFT=!1:this.player.keyboard.input.RIGHT=!1)}enemyRandomInterval(){this.count++,this.count>50&&(this.enemy.random=Math.random(),this.count=0)}collision(){this.enemyRandomInterval(),this.moveControl(),this.playerToEnemy(),this.player.bullet&&this.enemy.bullet&&this.bulltobull(),this.enemy.bullet&&this.enemyToPlayer(this.enemy.bullet),this.enemyToPlayer(this.enemy)}pHp(){this.ctx.fillStyle="red",this.p1Hp.draw("yellow"),this.enemyHp.draw("yellow")}setup(){this.pHp(),this.player.draw(),this.enemy.draw(this.player.x)}update(){this.roundText(),this.player.soundControl(this.enemy),this.player.update(this.enemy.x),this.collision()}roundFinished(){this.splay&&(this.sound.play("./asset/sound/youwin.wav"),this.splay=!1)}roundText(){this.ctx.textAlign="center",this.ctx.fillStyle="red",this.ctx.fillText(`Round ${this.round}`,500,60,60)}reset(){this.p1Hp=new p(this.ctx,0,50,250),this.enemyHp=new p(this.ctx,1e3,50,250),this.player=new o(this.ctx,300,"ken",1),this.enemy=new c(800,this.ctx),this.hasWinner=!1}winner(){this.enemyHp.len<=0&&(this.player.over("win"),this.enemy.die(),this.enemy.alive=!1,this.hasWinner=!0,this.splay&&(this.pWin++,this.sound.play("./asset/sound/youwin.wav"),this.splay=!1)),this.p1Hp.len<=0&&(this.player.over("dead"),this.enemy.win(),this.enemy.alive=!1,this.hasWinner=!0,this.splay&&(this.eWin++,this.sound.play("./asset/sound/youlose.wav"),this.splay=!1)),this.eWin>=2&&(this.over=!0,this.whoWon="You Lost"),this.pWin>=2&&(this.over=!0,this.whoWon="You Won")}draw(){this.over?this.gameover():(this.setup(),this.winner(),this.hasWinner?(this.fps>150&&(this.round++,this.reset(),this.fps=0,this.splay=!0),this.fps++):(this.update(),this.enemy.update(this.player.x),this.p1Hp.winCount(this.pWin),this.enemyHp.winCount(this.eWin)))}};var m=class{constructor(t){this.ctx=t,this.background=new d(this.ctx),this.play=this.play.bind(this),this.input=new e,this.fps=0,this.image=new Image,this.image.src="https://i.pinimg.com/originals/f6/c4/51/f6c4516c11809f1b3550e0c68abfef89.gif",this.test=70,this.time=60,this.training=!1,this.vs=!1,this.vsMode=null,this.trainMode=null,this.round=1,this.box=[],this.canvas=document.getElementById("MyCanvas"),this.transparent=1,this.textX=1e3,this.sound=new h,this.sControl=!1}intro(){this.image.onload=()=>{this.ctx.drawImage(this.image,0,0,1e3,500),this.ctx.font="40px StreetFigther",this.ctx.fillStyle="black",this.ctx.textAlign="center",this.ctx.fillText("Best Street Fighter",500,200),this.ctx.font="20px Acme",this.setup()}}mouseEvent(){this.canvas.addEventListener("mousemove",t=>{this.canvas.style.cursor="default",this.box.forEach(s=>{t.layerX>=s.x-s.w&&t.layerX<=s.x+s.w&&t.layerY>=s.y-s.h&&t.layerY<=s.y+s.h&&(this.input.restart||(this.canvas.style.cursor="pointer"))})},!1)}clickEvent(){this.canvas.addEventListener("click",t=>{this.box.forEach(s=>{t.layerX>=s.x-s.w&&t.layerX<=s.x+s.w&&t.layerY>=s.y-s.h&&t.layerY<=s.y+s.h&&(this.input.restart||("vs"===s.mode?(this.vs=!0,this.input.restart=!0,this.vsMode=new l(this.ctx)):"train"===s.mode&&(this.trainMode=new u(this.ctx),this.input.restart=!0,this.training=!0)))})},!1)}createBox(t,s,i,e,h){this.ctx.font="20px StreetFighter",this.ctx.fillText(t,s,i);const a={x:s,y:i,h:e,w:this.ctx.measureText(t).width/2,mode:h};this.box.push(a)}setup(){this.createBox("1 Player Mode",500,300,20,"train"),this.createBox("2 Player Mode",500,350,20,"vs")}clock(){this.ctx.textAlign="center",this.ctx.fillStyle="red",this.ctx.font="40px Acme",this.fps++,this.fps>70&&(this.time--,this.fps=0),this.ctx.fillText(`${this.time}`,500,60)}roundStart(){this.ctx.save(),this.ctx.font="70px StreetFighter",this.ctx.fillStyle="black",this.ctx.fillText(` Round ${this.round} Start`,this.textX,150),this.textX-=10,this.ctx.restore(),this.textX<=0?this.training&&(this.trainMode.start=!0):this.sControl=!0}play(){this.input.restart&&(this.clock(),this.background.draw(),this.roundStart(),this.training?(this.trainMode.round>this.round&&(this.round=this.trainMode.round,this.textX=1e3),this.trainMode.draw()):this.vs&&this.vsMode.gamefun()),requestAnimationFrame(this.play)}};var y=class{constructor(){this.bgm=document.getElementById("myAudio"),this.bgsound=document.getElementById("music-button"),this.icon=document.getElementById("icon")}musicAction(){this.bgsound.addEventListener("click",()=>{this.bgm.paused?(this.bgm.play(),this.icon.className="fas fa-volume-up"):(this.bgm.pause(),this.icon.className="fas fa-volume-off")})}};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("MyCanvas");t.width=1e3,t.height=500;const s=t.getContext("2d"),i=new m(s),e=new y;i.intro(),i.mouseEvent(),i.clickEvent(),e.musicAction(),i.play()})}]);
//# sourceMappingURL=bundle.js.map